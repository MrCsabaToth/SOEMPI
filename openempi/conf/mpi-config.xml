<?xml version="1.0" encoding="UTF-8"?>
<!--Copyright (C) 2010 SYSNET International, Inc. <support@sysnetint.com> 
	Licensed under the Apache License, Version 2.0 (the "License"); you may not 
	use this file except in compliance with the License. You may obtain a copy 
	of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required 
	by applicable law or agreed to in writing, software distributed under the 
	License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS 
	OF ANY KIND, either express or implied. See the License for the specific 
	language governing permissions and limitations under the License.-->
<mpi-config xsi:schemaLocation="http://configuration.openempi.openhie.org/mpiconfig mpi-config.xsd  http://configuration.openempi.openhie.org/data-loader data-loader.xsd  http://configuration.openempi.openhie.org/basic-blocking basic-blocking.xsd  http://configuration.openempi.openhie.org/exact-matching exact-matching.xsd  http://configuration.openempi.openhie.org/probabilistic-matching probabilistic-matching.xsd  http://configuration.openempi.openhie.org/record-linkage-protocol record-linkage-protocol.xsd" xmlns="http://configuration.openempi.openhie.org/mpiconfig" xmlns:mpi="http://configuration.openempi.openhie.org/mpiconfig" xmlns:dl="http://configuration.openempi.openhie.org/data-loader" xmlns:bb="http://configuration.openempi.openhie.org/basic-blocking" xmlns:em="http://configuration.openempi.openhie.org/exact-matching" xmlns:pm="http://configuration.openempi.openhie.org/probabilistic-matching" xmlns:rl="http://configuration.openempi.openhie.org/record-linkage-protocol" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <rl:record-linkage-protocol>
        <rl:record-linkage-protocol-config>
            <rl:privacy-settings>
                <rl:component-settings>
                    <rl:keyserver-settings>
                        <rl:server-address>localhost</rl:server-address>
                        <rl:number-of-salts>50</rl:number-of-salts>
                        <rl:salt-id-start>50</rl:salt-id-start>
                        <rl:salt-id-stride>1</rl:salt-id-stride>
                    </rl:keyserver-settings>
                    <rl:parameter-manager-settings>
                        <rl:server-address>tower.dhcp.mc.vanderbilt.edu</rl:server-address>
                    </rl:parameter-manager-settings>
                    <rl:data-integrator-settings>
                        <rl:server-address>node-1.dhcp.mc.vanderbilt.edu</rl:server-address>
                    </rl:data-integrator-settings>
                </rl:component-settings>
                <rl:bloomfilter-settings>
                    <rl:n-gram-size>2</rl:n-gram-size>
                    <rl:default-m>1000</rl:default-m>
                    <rl:default-k>40</rl:default-k>
                </rl:bloomfilter-settings>
            </rl:privacy-settings>
        </rl:record-linkage-protocol-config>
    </rl:record-linkage-protocol>
    <dl:data-loader>
        <dl:data-loader-config>
            <dl:delimiter-regex>,</dl:delimiter-regex>
            <dl:header-line-present>false</dl:header-line-present>
            <dl:data-fields>
                <dl:data-field>
                    <dl:source-column-index>0</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>originalid</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>16</dl:field-type-modifier>
                        <dl:field-meaning>original-id</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>1</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>familyname</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>64</dl:field-type-modifier>
                        <dl:field-meaning>family-name</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>1</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>familynamedoublemetaphone</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>16</dl:field-type-modifier>
                        <dl:field-meaning>family-name</dl:field-meaning>
                        <dl:field-transformation>
                            <function-name>DoubleMetaphone</function-name>
                        </dl:field-transformation>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>1</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>familynamehmacsha</dl:field-name>
                        <dl:field-type>blob</dl:field-type>
                        <dl:field-meaning>family-name</dl:field-meaning>
                        <dl:field-transformation>
                            <function-name>HMACSHA1Function</function-name>
                        </dl:field-transformation>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>1</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>familynamebloomfilter</dl:field-name>
                        <dl:field-type>blob</dl:field-type>
                        <dl:field-meaning>family-name</dl:field-meaning>
                        <dl:field-transformation>
                            <function-name>BloomFilter4ByteSaltUnpaddedNgrams</function-name>
                            <parameters>
                                <parameter>
                                    <parameter-name>m</parameter-name>
                                    <parameter-value>1000</parameter-value>
                                    <parameter-type>integer</parameter-type>
                                </parameter>
                                <parameter>
                                    <parameter-name>k</parameter-name>
                                    <parameter-value>40</parameter-value>
                                    <parameter-type>integer</parameter-type>
                                </parameter>
                            </parameters>
                        </dl:field-transformation>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>2</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>givenname</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>64</dl:field-type-modifier>
                        <dl:field-meaning>given-name</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>2</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>givennamedoublemetaphone</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>16</dl:field-type-modifier>
                        <dl:field-meaning>given-name</dl:field-meaning>
                        <dl:field-transformation>
                            <function-name>DoubleMetaphone</function-name>
                        </dl:field-transformation>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>2</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>givennamehmacsha</dl:field-name>
                        <dl:field-type>blob</dl:field-type>
                        <dl:field-meaning>given-name</dl:field-meaning>
                        <dl:field-transformation>
                            <function-name>HMACSHA256Function</function-name>
                        </dl:field-transformation>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>2</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>givennamebloomfilter</dl:field-name>
                        <dl:field-type>blob</dl:field-type>
                        <dl:field-meaning>given-name</dl:field-meaning>
                        <dl:field-transformation>
                            <function-name>BloomFilter4ByteSaltPaddedNgrams</function-name>
                            <parameters>
                                <parameter>
                                    <parameter-name>m</parameter-name>
                                    <parameter-value>1000</parameter-value>
                                    <parameter-type>integer</parameter-type>
                                </parameter>
                                <parameter>
                                    <parameter-name>k</parameter-name>
                                    <parameter-value>40</parameter-value>
                                    <parameter-type>integer</parameter-type>
                                </parameter>
                            </parameters>
                        </dl:field-transformation>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>3</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>middlename</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>64</dl:field-type-modifier>
                        <dl:field-meaning>middle-name</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>3</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>middlenamebloomfilter</dl:field-name>
                        <dl:field-type>blob</dl:field-type>
                        <dl:field-meaning>middle-name</dl:field-meaning>
                        <dl:field-transformation>
                            <function-name>BloomFilter64ByteSaltUnpaddedNgrams</function-name>
                            <parameters>
                                <parameter>
                                    <parameter-name>m</parameter-name>
                                    <parameter-value>1000</parameter-value>
                                    <parameter-type>integer</parameter-type>
                                </parameter>
                                <parameter>
                                    <parameter-name>k</parameter-name>
                                    <parameter-value>40</parameter-value>
                                    <parameter-type>integer</parameter-type>
                                </parameter>
                            </parameters>
                        </dl:field-transformation>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>4</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>birthstate</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>16</dl:field-type-modifier>
                        <dl:field-meaning>birth-state</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>5</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>city</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>16</dl:field-type-modifier>
                        <dl:field-meaning>city</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>5</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>cityhmacmd5</dl:field-name>
                        <dl:field-type>blob</dl:field-type>
                        <dl:field-meaning>city</dl:field-meaning>
                        <dl:field-transformation>
                            <function-name>HMACMD5Function</function-name>
                        </dl:field-transformation>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>5</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>citybloomfilter</dl:field-name>
                        <dl:field-type>blob</dl:field-type>
                        <dl:field-meaning>city</dl:field-meaning>
                        <dl:field-transformation>
                            <function-name>BloomFilterHybridHMACUnpaddedNgrams</function-name>
                            <parameters>
                                <parameter>
                                    <parameter-name>m</parameter-name>
                                    <parameter-value>1000</parameter-value>
                                    <parameter-type>integer</parameter-type>
                                </parameter>
                                <parameter>
                                    <parameter-name>k</parameter-name>
                                    <parameter-value>40</parameter-value>
                                    <parameter-type>integer</parameter-type>
                                </parameter>
                            </parameters>
                        </dl:field-transformation>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>6</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>state</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>16</dl:field-type-modifier>
                        <dl:field-meaning>state</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>7</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>address</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>128</dl:field-type-modifier>
                        <dl:field-meaning>address</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>7</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>addressbloomfilter</dl:field-name>
                        <dl:field-type>blob</dl:field-type>
                        <dl:field-meaning>address</dl:field-meaning>
                        <dl:field-transformation>
                            <function-name>BloomFilterHybridHMACPaddedNgrams</function-name>
                            <parameters>
                                <parameter>
                                    <parameter-name>m</parameter-name>
                                    <parameter-value>1000</parameter-value>
                                    <parameter-type>integer</parameter-type>
                                </parameter>
                                <parameter>
                                    <parameter-name>k</parameter-name>
                                    <parameter-value>40</parameter-value>
                                    <parameter-type>integer</parameter-type>
                                </parameter>
                            </parameters>
                        </dl:field-transformation>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>8</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>addresstype</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>16</dl:field-type-modifier>
                        <dl:field-meaning>address-type</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>9</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>addressdirection</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>16</dl:field-type-modifier>
                        <dl:field-meaning>address-direction</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>10</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>color</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>16</dl:field-type-modifier>
                        <dl:field-meaning>race</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
                <dl:data-field>
                    <dl:source-column-index>11</dl:source-column-index>
                    <dl:source-field-name/>
                    <dl:target-field>
                        <dl:field-name>gender</dl:field-name>
                        <dl:field-type>string</dl:field-type>
                        <dl:field-type-modifier>16</dl:field-type-modifier>
                        <dl:field-meaning>gender</dl:field-meaning>
                    </dl:target-field>
                </dl:data-field>
            </dl:data-fields>
        </dl:data-loader-config>
    </dl:data-loader>
    <bb:basic-blocking>
        <bb:number-of-records-to-sample>50</bb:number-of-records-to-sample>
        <bb:blocking-rounds>
            <bb:blocking-round>
                <bb:blocking-fields>
                    <bb:blocking-field>
                        <bb:left-field-name>familynamedoublemetaphone</bb:left-field-name>
                        <bb:right-field-name>familynamedoublemetaphone</bb:right-field-name>
                    </bb:blocking-field>
                    <bb:blocking-field>
                        <bb:left-field-name>givennamedoublemetaphone</bb:left-field-name>
                        <bb:right-field-name>givennamedoublemetaphone</bb:right-field-name>
                    </bb:blocking-field>
                </bb:blocking-fields>
            </bb:blocking-round>
        </bb:blocking-rounds>
    </bb:basic-blocking>
    <privacy-preserving-blocking>
        <number-of-blocking-bits>7</number-of-blocking-bits>
        <number-of-runs>4</number-of-runs>
        <privacy-preserving-blocking-source-fields>
            <privacy-preserving-blocking-source-field>
                <left-field-name>addresssha</left-field-name>
                <right-field-name>addresssha</right-field-name>
                <bits>
                    <bit>0</bit>
                    <bit>1</bit>
                    <bit>2</bit>
                </bits>
            </privacy-preserving-blocking-source-field>
            <privacy-preserving-blocking-source-field>
                <left-field-name>citysha</left-field-name>
                <right-field-name>citysha</right-field-name>
                <bits>
                    <bit>0</bit>
                    <bit>1</bit>
                    <bit>2</bit>
                </bits>
            </privacy-preserving-blocking-source-field>
            <privacy-preserving-blocking-source-field>
                <left-field-name>familynamesha</left-field-name>
                <right-field-name>familynamesha</right-field-name>
                <bits>
                    <bit>0</bit>
                    <bit>1</bit>
                    <bit>2</bit>
                </bits>
            </privacy-preserving-blocking-source-field>
            <privacy-preserving-blocking-source-field>
                <left-field-name>givennamesha</left-field-name>
                <right-field-name>givennamesha</right-field-name>
                <bits>
                    <bit>0</bit>
                    <bit>1</bit>
                    <bit>2</bit>
                </bits>
            </privacy-preserving-blocking-source-field>
            <privacy-preserving-blocking-source-field>
                <left-field-name>middlenamesha</left-field-name>
                <right-field-name>middlenamesha</right-field-name>
                <bits>
                    <bit>0</bit>
                    <bit>1</bit>
                    <bit>2</bit>
                </bits>
            </privacy-preserving-blocking-source-field>
        </privacy-preserving-blocking-source-fields>
    </privacy-preserving-blocking>
    <pm:probabilistic-matching>
        <pm:false-negative-probability>0.0010</pm:false-negative-probability>
        <pm:false-positive-probability>0.0010</pm:false-positive-probability>
        <pm:em-settings>
            <pm:m-initial>0.9</pm:m-initial>
            <pm:u-initial>0.1</pm:u-initial>
            <pm:p-initial>0.0010</pm:p-initial>
            <pm:convergence-error>1.0E-7</pm:convergence-error>
            <pm:max-iterations>1000</pm:max-iterations>
            <pm:max-tries>10</pm:max-tries>
        </pm:em-settings>
        <pm:match-fields>
            <pm:match-field>
                <pm:left-field-name>givennamebloomfilter</pm:left-field-name>
                <pm:right-field-name>givennamebloomfilter</pm:right-field-name>
                <pm:agreement-probability>0.9</pm:agreement-probability>
                <pm:disagreement-probability>0.1</pm:disagreement-probability>
                <pm:comparator-function>
                    <function-name>DiceBinary</function-name>
                </pm:comparator-function>
                <pm:match-threshold>0.9</pm:match-threshold>
            </pm:match-field>
            <pm:match-field>
                <pm:left-field-name>familynamebloomfilter</pm:left-field-name>
                <pm:right-field-name>familynamebloomfilter</pm:right-field-name>
                <pm:agreement-probability>0.9</pm:agreement-probability>
                <pm:disagreement-probability>0.1</pm:disagreement-probability>
                <pm:comparator-function>
                    <function-name>DiceBinary</function-name>
                </pm:comparator-function>
                <pm:match-threshold>0.9</pm:match-threshold>
            </pm:match-field>
            <pm:match-field>
                <pm:left-field-name>middlenamebloomfilter</pm:left-field-name>
                <pm:right-field-name>middlenamebloomfilter</pm:right-field-name>
                <pm:agreement-probability>0.9</pm:agreement-probability>
                <pm:disagreement-probability>0.1</pm:disagreement-probability>
                <pm:comparator-function>
                    <function-name>DiceBinary</function-name>
                </pm:comparator-function>
                <pm:match-threshold>0.9</pm:match-threshold>
            </pm:match-field>
            <pm:match-field>
                <pm:left-field-name>citybloomfilter</pm:left-field-name>
                <pm:right-field-name>citybloomfilter</pm:right-field-name>
                <pm:agreement-probability>0.9</pm:agreement-probability>
                <pm:disagreement-probability>0.1</pm:disagreement-probability>
                <pm:comparator-function>
                    <function-name>DiceBinary</function-name>
                </pm:comparator-function>
                <pm:match-threshold>0.9</pm:match-threshold>
            </pm:match-field>
            <pm:match-field>
                <pm:left-field-name>addressbloomfilter</pm:left-field-name>
                <pm:right-field-name>addressbloomfilter</pm:right-field-name>
                <pm:agreement-probability>0.9</pm:agreement-probability>
                <pm:disagreement-probability>0.1</pm:disagreement-probability>
                <pm:comparator-function>
                    <function-name>DiceBinary</function-name>
                </pm:comparator-function>
                <pm:match-threshold>0.9</pm:match-threshold>
            </pm:match-field>
        </pm:match-fields>
    </pm:probabilistic-matching>
    <admin-configuration>
        <file-repository-directory>fileRepository</file-repository-directory>
        <component-mode>data-provider</component-mode>
        <experimental-mode>true</experimental-mode>
    </admin-configuration>
</mpi-config>